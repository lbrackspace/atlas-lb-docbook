<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book [
    <!-- Some useful entities borrowed from HTML -->
    <!ENTITY ndash  "&#x2013;">
    <!ENTITY mdash  "&#x2014;">
    <!ENTITY hellip "&#x2026;">

    <!-- Useful for describing APIs -->
    <!ENTITY GET    '<command xmlns="http://docbook.org/ns/docbook">GET</command>'>
    <!ENTITY PUT    '<command xmlns="http://docbook.org/ns/docbook">PUT</command>'>
    <!ENTITY POST   '<command xmlns="http://docbook.org/ns/docbook">POST</command>'>
    <!ENTITY DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>

    <!ENTITY CHECK  '<inlinemediaobject xmlns="http://docbook.org/ns/docbook">
        <imageobject>
        <imagedata fileref="img/Check_mark_23x20_02.svg"
        format="SVG" scale="60"/>
        </imageobject>
        </inlinemediaobject>'>

    <!ENTITY ARROW  '<inlinemediaobject xmlns="http://docbook.org/ns/docbook">
        <imageobject>
        <imagedata fileref="img/Arrow_east.svg"
        format="SVG" scale="60"/>
        </imageobject>
        </inlinemediaobject>'>
]>
<book version="5.0" xmlns="http://docbook.org/ns/docbook"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        xmlns:xi="http://www.w3.org/2001/XInclude"
        xmlns:svg="http://www.w3.org/2000/svg"
        xmlns:m="http://www.w3.org/1998/Math/MathML"
        xmlns:html="http://www.w3.org/1999/xhtml"
        xmlns:db="http://docbook.org/ns/docbook">
    <?rax title.font.size="35px" subtitle.font.size="20px"?>
    <title>Rackspace Cloud Load Balancers Developer Guide for Service Management</title>
    <titleabbrev>Rackspace Cloud LB Mgmt Guide</titleabbrev>
    <?rax status.bar.text="RAX INTERNAL"?>
    <info>
        <author>
            <personname>
                <firstname/>
                <surname/>
            </personname>
            <affiliation>
                <orgname>Rackspace Cloud</orgname>
            </affiliation>
        </author>
        <copyright>
            <year>2010</year>
            <year>2011</year>
            <holder>Rackspace US, Inc.</holder>
        </copyright>
        <releaseinfo>API v1.0</releaseinfo>
        <productname>Rackspace Cloud Load Balancers</productname>
        <pubdate>2011-04-19</pubdate>
        <legalnotice role="rs-api">
            <annotation>
                <remark>Copyright details are filled in by the template.</remark>
            </annotation>
        </legalnotice>
        <abstract>
            <para>
                This document is intended for software developers interested in developing
                service management applications using the Rackspace Cloud Load Balancers Application Program Interface
                (<abbrev>API</abbrev>).
            </para>
        </abstract>
        <cover>
            <para>this is a placeholder for the front cover</para>
        </cover>
        <cover>
            <para>this is a placeholder for the back cover</para>
        </cover>
    </info>
    <chapter>
        <title>Overview</title>
        <section>
            <title>Intended Audience</title>
            <para>This guide is intended for software developers who want to create applications using
                the management API for Rackspace Cloud Load Balancers.
            </para>
        </section>
        <section>
            <title>Document Change History</title>
            <para>This version of the Developer Guide replaces and obsoletes all previous versions.
                The most recent changes are described in the table below: </para>
            <informaltable rules='all'>
                <thead>
                    <tr align="center">
                        <td colspan="1">Revision Date</td>
                        <td colspan="4">Summary of Changes</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1" align="center">May. 20, 2011</td>
                        <td colspan="4" align="left">
                            <itemizedlist spacing="compact">
                                <listitem>
                                    <para>Added load balancer audit reports</para>
                                </listitem>
                            </itemizedlist>
                        </td>
                    </tr>
                    <tr align="left">
                        <td colspan="1" align="center">Apr. 19, 2011</td>
                        <td colspan="4" align="left">
                            <itemizedlist spacing="compact">
                                <listitem>
                                    <para>Added details to support general availability.</para>
                                </listitem>
                            </itemizedlist>
                        </td>
                    </tr>
                    <tr align="left">
                        <td colspan="1" align="center">Mar. 24, 2011</td>
                        <td colspan="4" align="left">
                            <itemizedlist spacing="compact">
                                <listitem>
                                    <para>Added examples of cluster POST/PUT.</para>
                                </listitem>
                            </itemizedlist>
                        </td>
                    </tr>
                    <tr align="left">
                        <td colspan="1" align="center">Mar. 3, 2011</td>
                        <td colspan="4" align="left">
                            <itemizedlist spacing="compact">
                                <listitem>
                                    <para>Initial release for public beta.</para>
                                </listitem>
                            </itemizedlist>
                        </td>
                    </tr>
                    <tr align="left">
                        <td colspan="1" align="center">Apr. 1, 2011</td>
                        <td colspan="4" align="left">
                            <itemizedlist spacing="compact">
                                <listitem>
                                    <para>Added CusterCount Examples and information</para>
                                </listitem>
                            </itemizedlist>
                        </td>
                    </tr>
                </tbody>
            </informaltable>
        </section>
        <section>
            <title>Additional Resources</title>
            <para>Two APIs provide access to Rackspace Cloud Load Balancers: 
                <itemizedlist spacing="compact">
                    <listitem>
                        <para>The management API, available only to developers within Rackspace, is
                            the subject of this document.</para></listitem>
                    <listitem>
                        <para>The public API, available to developers within Rackspace and Rackspace
                            customers, is the subject of a companion document, The Rackspace Cloud
                            Load Balancers API DeveloperGuide.</para>
                    </listitem>
                </itemizedlist>
                You can download the current version of the Rackspace Cloud Load Balancers API Developer Guide
                from <link xlink:href="http://docs.rackspacecloud.com/loadbalancers/api/clb-devguide-latest.pdf">
                http://docs.rackspacecloud.com/loadbalancers/api/clb-devguide-latest.pdf</link>.
            </para>
        </section>
    </chapter>
    <chapter>
        <title>Management API Operations</title>
        <para>
            These API operations relate to administration of the environment that enables and supports the load balancing service for all customers.
            The scope of these operations is wide, relating to the overall operating environment rather than to a single customer.
            Rackers might perform these operations to examine or alter the overall operational environment.
        </para>
        <section>
            <title>Load Balancers</title>
            <section>
                <title>List Load Balancers</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td>Verb</td>
                            <td>URI</td>
                            <td>Description</td>
                            <td>Access Level</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td>&GET;</td>
                            <td>/management/loadbalancers?vipid=<parameter>id</parameter></td>
                            <td>Retrieve a list of all load balancers using a virtual IP id.</td>
                            <td>Support, Service Admin </td>
                        </tr>
                        <tr>
                            <td>&GET;</td>
                            <td>/management/loadbalancers?vipaddress=<parameter>vipAddress</parameter></td>
                            <td>Retrieve a list of all load balancers using a virtual ip
                                address.</td>
                            <td>Support, Service Admin</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s): <returnvalue>200</returnvalue>
                </para>
                <simpara>
                    Error Response Code(s): loadBalancerManagementFault(<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>), unauthorized
                    (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>), overLimit
                    (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    Use query parameters to retrieve a list of load balancers based on virtual IP id or
                    address. The response will contain basic information for all load balancers that are associated
                    with the requested virtual IP.
                </para>
                <para>
                    A single call can accept either <parameter>?vipid</parameter> or <parameter>?vipaddress</parameter> but not both.
                    If both parameters are supplied, the request will fail with a badRequest (<errorcode>400</errorcode>) and message 'Cannot set both ip address and vip id.'
                </para>
                    <para>
                        The virtual IP address is validated before use. If the specified <parameter>?vipaddress</parameter> does not conform to IpV4
                        or Ipv6 syntax, the request will fail with a badRequest (<errorcode>400</errorcode>) and message 'Ip address
                        is invalid.'
                    </para>
                <example>
                    <title>List Load Balancers by Virtual IP Response: XML</title>
                    <programlisting language="xml">
    <xi:include href="samples/lb-list-loadbalancers-by-vip-id.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Load Balancers by Virtual IP Response: JSON</title>
                    <programlisting language="javascript">
    <xi:include href="samples/lb-list-loadbalancers-by-vip-id.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Load Balancers by Virtual IP Address Response: XML</title>
                    <programlisting language="xml">
    <xi:include href="samples/lb-list-loadbalancers-by-vip-address.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Load Balancers by Virtual IP Address Response: JSON</title>
                    <programlisting language="javascript">
    <xi:include href="samples/lb-list-loadbalancers-by-vip-address.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
        </section>
        <section>
            <title>Clusters</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="5">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/clusters</td>
                        <td colspan="3">Retrieve a list of all clusters.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/clusters/<parameter>clusterId</parameter></td>
                        <td colspan="3">Retrieve a cluster by id.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>
            </para>
            <simpara>
                Error Response Code(s):
                loadBalancerManagementFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>), unauthorized (
                <errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>), overLimit (
                <errorcode>413</errorcode>)
            </simpara>
                <para>
                    The cluster operations are used for retrieving descriptive information about load balancing
                    clusters.
                </para>
                <para>
                    The &GET; response contains attributes that are generated and immutable:
                    <code>numberOfLoadBalancingConfigurations</code>,
                    <code>numberOfUniqueCustomers</code>, <code>numberOfHostMachines</code>, and
                    <code>utilization</code>. A cluster's attributes are calculated based
                    on configurations associated with this cluster.
                </para>
            <example>
                <title>List All Clusters Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-clusters-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List All Clusters Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-clusters-response.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Specified Cluster Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-clusters-clusterid-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Specified Cluster Response: JSON</title>
                <programlisting language="json">
<xi:include href="samples/lb-list-clusters-clusterid-response.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section>
            <title>Host Machines</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="5">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/hosts</td>
                        <td colspan="3">Retrieve a list of all hosts within the region.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/clusters/<parameter>clusterId</parameter>/hosts</td>
                        <td colspan="3">Retrieve a list of all hosts belonging to a cluster.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="5">/hosts</td>
                        <td colspan="3">Create a new load balancing host.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/management/hosts/hostId</td>
                        <td colspan="3">Retrieve a detailed list of this host's configuration.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&PUT;</td>
                        <td colspan="5">/hosts/<parameter>hostId</parameter></td>
                        <td colspan="3">Update the mutable attributes of a load balancing host.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="5">/hosts/<parameter>hostId</parameter></td>
                        <td colspan="3">Remove a load balancing host.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/clusters/<parameter>clusterId</parameter>/endpoint</td>
                        <td colspan="3">Retrieve the host that is currently the active SOAP
                            endpoint.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&PUT;</td>
                        <td colspan="5">/hosts/<parameter>hostId</parameter>/endpoint/enable</td>
                        <td colspan="3">Enable this host's SOAP endpoint. (Warning: can be
                            overwritten by <code>pollendpoints</code> call.)</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&PUT;</td>
                        <td colspan="5">/hosts/<parameter>hostId</parameter>/endpoint/disable</td>
                        <td colspan="3">Disable this host's SOAP endpoint. (Warning: can be
                            overwritten by <code>pollendpoints</code> call.)</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&PUT;</td>
                        <td colspan="5">/clusters/pollendpoints</td>
                        <td colspan="3">Test all endpoints and set <code>soap_endpoint_active</code>
                            if endpoint works.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
                <para>
                    The host operations allow for retrieval of host configuration data and statistics as well as
                    the ability to add, manipulate or delete load balancing hosts.
                </para>
            <example>
                <title>List All Hosts Within Cluster Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-hosts-clusters-clusterid-hosts.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List All Hosts Within Cluster Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-hosts-clusters-clusterid-hosts.json" parse="text"/>
                </programlisting>
            </example>
                <section>
                    <title>Creating a New Host</title>
                    <para>
                        When creating a new host, the caller must supply the following attributes:
                    </para>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>
                                <code>name</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>clusterid</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>coreDeviceId</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>zone</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>maxConcurrentConnections</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>managementIpAddress</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>managementSoapInterface</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>trafficManagerName</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>soapEndpointActive</code>
                            </para>
                        </listitem>
                    </itemizedlist>
                    <example>
                        <title>Create Host Request: XML</title>
                        <programlisting language="xml">
<xi:include href="samples/lb-create-host.xml" parse="text"/>
                </programlisting>
                    </example>
                    <example>
                        <title>Create Host Request: JSON</title>
                        <programlisting language="javascript">
<xi:include href="samples/lb-create-host.json" parse="text"/>
                </programlisting>
                    </example>
                </section>
                <section>
                    <title>Changing Mutable Attributes</title>
                    <para>
                        The &GET; response contains several attributes (<code>utilization</code>,
                        <code>numberOfLoadBalancingConfigurations</code>, and <code>numberOfUniqueCustomers</code>)
                        that are generated based on state data and are immutable. Immutable attributes are
                        calculated based on configurations associated with this host.
                    </para>
                    <para> The following attributes are mutable via the &PUT; HTTP operation: </para>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>
                                <code>name</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>coreDeviceId</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>status</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>maxConcurrentConnections</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>managementIpAddress</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>managementSoapInterface</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code>soapEndpointActive</code>
                            </para>
                        </listitem>
                    </itemizedlist>
                    <para> Valid values for <code>status</code> are <code>ACTIVE</code>,
                        <code>ACTIVE TARGET</code>, <code>MAINTENANCE</code>, and
                        <code>FAILOVER</code>.</para>
            <example>
                <title>Update Host Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-update-host-hostid.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Update Host Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-update-host-hostid.json" parse="text"/>
                </programlisting>
            </example>           
                </section>
            </section>
        <section>
            <title>Virtual IPs</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="5">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/virtualips</td>
                        <td colspan="3">Retrieve a list of all virtual IPs associated with the
                            region.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/clusters/<parameter>clusterId</parameter>/virtualips</td>
                        <td colspan="3">Retrieve a list of all virtual IPs associated with a
                            cluster.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/virtualips/<parameter>virtualIpId</parameter>/loadbalancers</td>
                        <td colspan="3">Retrieve a list of load balancers associated with this
                            virtual IP.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>/virtualips</td>
                        <td colspan="3">Retrieve a list of all virtual IPs associated with a load
                            balancer.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="5">/clusters/<parameter>clusterId</parameter>/virtualipblocks</td>
                        <td colspan="3">Assign a set of IP blocks to the cluster.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="5">/virtualips/<parameter>virtualIpId</parameter></td>
                        <td colspan="3">Remove the specified virtual IP from the cluster.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
                <para>
                    The virtual IP operations allow the caller to view, create, and remove virtual IPs from an
                    environment. Virtual IPs are automatically assigned to every newly created load balancer and
                    can be added on-demand by a support or service administrator with proper justification.
                    Management of the service requires blocks of IP addresses to be allocated from time-to-time to
                    ensure availability for customers.
                </para>
                <para>
                    In order to assign a virtual IP to the environment via the &POST; operation, the caller must
                    supply the address, and type attributes as part of the virtualip element. A sample &POST;
                    request can be found below.
                </para>
                <note>
                    <para>
                    In the event a virtual IP must be removed from the cluster, the &DELETE; operation can be used;
                    however, to delete a virtual IP it must not have a load balancer associated to it.
                    </para>
                </note>
                <note>
                    <para>
                    To add single or multiple specific virtual IPs, simply specify the first and lastIp fields
                    identically (not as a range).
                    </para>
                </note>
            <example>
                <title>List All VIPs Within Cluster Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-virtualips-clusters-clusterid-virtualips.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List All VIPs Within Cluster Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-virtualips-clusters-clusterid-virtualips.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Assign IP Blocks Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-create-clusters-clusterid-virtualipblocks.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Assign IP Blocks Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-create-clusters-clusterid-virtualipblocks.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section>
            <title>Rate Limits</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="5">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>/ratelimit</td>
                        <td colspan="3">Retrieve the rate limit information for a specified load
                            balancer.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>/ratelimit</td>
                        <td colspan="3">Impose a new rate limit on the specified load balancer.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&PUT;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>/ratelimit</td>
                        <td colspan="3">Modify the expiration time and/or ticket associated with the
                            rate limit.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>/ratelimit</td>
                        <td colspan="3">Immediately remove the defined rate limit.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>/removeoldlimits</td>
                        <td colspan="3">Immediately remove expired limits.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
                <para>
                    Rate limiting allows a service administrator to artificially limit the number of requests that
                    are permitted to transit a given load balancer. This action can be taken when a particular load
                    balancer is servicing questionable traffic, the victim of a DDoS, etc. To define a rate limit,
                    the caller must supply a ticket id, maximum number of connections per second, and an expiration
                    time.
                </para>
                <para>
                    Additionally, rate limit information is returned as part of the "extended details of a load
                    balancer", which is documented below.
                </para>
            <example>
                <title>List Rate Limit Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-ratelimit.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Rate Limit Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-ratelimit.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Set Rate Limit Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-create-ratelimit.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Set Rate Limit Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-create-ratelimit.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Update Rate Limit Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-update-ratelimit.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Update Rate Limit Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-update-ratelimit.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section>
            <title>Associations Between Load Balancers and Host Machines</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="5">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&PUT;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>/sticky</td>
                        <td colspan="3">Make the specified load balancer sticky.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>/sticky</td>
                        <td colspan="3">Turn off the "sticky" flag on the specified load
                            balancer.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">loadbalancers/<parameter>loadBalancerId</parameter>/host</td>
                        <td colspan="3">Get the host assignment(s) for a specified load
                            balancer.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&PUT;</td>
                        <td colspan="5">/loadbalancers/reassignhosts</td>
                        <td colspan="3">Update the host assignment(s) for a list of load
                            balancers.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
                <para>
                    Service administrators may re-assign a load balancer to a different host machine within the same
                    cluster. This action can be taken if capacity warrants it or if a particular configuration needs
                    to be isolated from others within the environment. Both active and failover hosts may be changed.
                </para>
                <para>
                    Additionally, this operation allows for a service administrator to define a load balancer's host
                    configurations as being "sticky", which will prohibit the system from automatically moving this
                    configuration between hosts to balance the host performance.
                </para>
                <para>
                    A load balancer that is defined as being ACTIVE on multiple hosts will allow the load balancer
                    host machines to service traffic for a single VIP across multiple systems. This is an advanced
                    feature that should be used cautiously as it can potentially amplify DDoS and other types of
                    malicious traffic.
                </para>
            <example>
                <title>Update Host Assignment Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-loadbalancer-host.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Update Host Assignment Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-loadbalancer-host.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Update Host Assignment for Multiple Load Balancers with specified Host Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-update-loadbalancer-reassignhosts.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Update Host Assignment for Multiple Load Balancers with specified host Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-update-loadbalancer-reassignhosts.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Update Host Assignment for Multiple Load Balancers with Host chosen by algorithm Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-update-loadbalancer-random-reassignhosts.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Update Host Assignment for Multiple Load Balancers with Host chosen by algorithm Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-update-loadbalancer-random-reassignhosts.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section>
            <title>Configuration Backups</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="5">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/hosts/backups</td>
                        <td colspan="3">View a list of available backups for all host machines.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/hosts/<parameter>hostId</parameter>/backups</td>
                        <td colspan="3">View a list of available backups for a specified host
                            machine.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/hosts/<parameter>hostId</parameter>/subnetmappings</td>
                        <td colspan="3">View the list of subnet mappings for this host.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&PUT;</td>
                        <td colspan="5">/hosts/<parameter>hostId</parameter>/subnetmappings</td>
                        <td colspan="3">Add subnet mappings on this host.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="5">/hosts/<parameter>hostId</parameter>/subnetmappings</td>
                        <td colspan="3">Delete the specified subnet mappings on this host.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="5">/hosts/<parameter>hostId</parameter>/backups</td>
                        <td colspan="3">Create a new backup of the host configuration.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="5">/hosts/<parameter>hostId</parameter>/backups/backupId</td>
                        <td colspan="3">Purge a backup with the specified backup ID.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&PUT;</td>
                        <td colspan="5">/hosts/<parameter>hostId</parameter>/backups/<parameter>backupId</parameter>/restore</td>
                        <td colspan="3">Restore the specified backup to the host machine.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
                <para> The host backup and restoration tools allow for service administrators to
                take periodic backups of the current state of the configuration on any given host
                machine. These functions allow the caller to view a list of available backup
                configurations, create new backups, purge backups, and restore any available
                configuration. </para>
            <section>
                <title>Examining Immutable Parameters</title>
                <para> Descriptive information about backup configurations can be listed but cannot
                    be changed. This includes: <itemizedlist spacing="compact">
                        <listitem>
                            <para> backupTime </para>
                        </listitem>
                        <listitem>
                            <para> hostId </para>
                        </listitem>
                        <listitem>
                            <para> id </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    Callers are not required to supply request bodies for the &PUT; (Restore Backup) operations.
                </para>
                <example>
                    <title>List Available Backups for All Hosts Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-backups.xml" parse="text"/>
                </programlisting>
                </example>
                <example>
                    <title>List Available Backups for All Hosts Response: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-list-backups.json" parse="text"/>
                </programlisting>
                </example>
                <example>
                    <title>List Available Backups for Specified Host Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-update-backups.xml" parse="text"/>
                </programlisting>
                </example>
                <example>
                    <title>List Available Backups for Specified Host Response: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-update-backups.json" parse="text"/>
                </programlisting>
                </example>                             
            </section>
            <section>
                <title>Creating a New Backup</title>
                <para>
                    When creating a new backup, the caller must supply the following attributes:
                </para>
                <para>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>
                                <parameter>name</parameter>
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
            </section>
            <section>
                <title>Changing Subnet Mappings</title>
                <para> For each host, subnet mappings can be added or deleted. </para>
            <example>
                <title>Add Subnet Mappings Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-subnetmappings.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Add Subnet Mappings Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-update-subnetmappings.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Add Subnet Mappings Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-update-subnetmappings.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Delete Subnet Mappings Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-delete-subnetmappings.xml" parse="text" />
                </programlisting>
            </example>
            <example>
                <title>Delete Subnet Mappings Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-delete-subnetmappings.json" parse="text" />
                </programlisting>
            </example>
                </section>
        </section>
        <section>
            <title>Customer Lists</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="5">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="5">/hosts/customers</td>
                        <td colspan="3">Generate a customer list by host.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="5">/clusters/customers</td>
                        <td colspan="3">Generate a customer list by cluster.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/clusters/<parameter>clusterId</parameter>/customercount</td>
                        <td colspan="3">Generate a customer list by cluster id.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/hosts/<parameter>hostid</parameter>/customercount</td>
                        <td colspan="3">Generate a customer list by host id.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
                <para> The generated customer list allows external services to query the load
                balancing service to determine which customers are associated with either a cluster
                or a host. If the external service has access to customer contact information, this
                can make it possible to automate the process of identifying and contacting customers
                affected by an environmental change.</para>
            <example>
                <title>List Customers by Host or Cluster Name Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-customers-by-name.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Customers by Host or Cluster Name Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-customers-by-name.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Customers by Cluster Id Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-customers-by-id.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Customers by Cluster Id Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-customers-by-id.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Customers Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-customers.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Customers Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-customers.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Customer Count by Host Id Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-customer-count-by-host-id.xml" parse="text" />
                </programlisting>
            </example>
            <example>
                <title>List Customer Count by Host Id Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-customer-count-by-host-id.json" parse="text" />
                </programlisting>
            </example>
            <example>
                <title>List Customer Count by Cluster Id Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-customer-count-by-cluster-id.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Customer Count by Cluster Id Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-customer-count-by-cluster-id.json" parse="text"/>
                </programlisting>
            </example>
        </section>
    </chapter>

    <chapter>
        <title>Extended Customer API Operations</title>
        <para>
            These API operations relate to support of load balancing service activities on behalf of a specific customer.
            The scope of these operations is narrow, relating to the needs of a single customer.
            A customer might directly request these operations but only Rackers are authorized to perform them.
            Rackers might also perform these operations to limit or terminate a specific customer's activities when that customer appears to be disrupting the overall operational environment.
        </para>
        <section>
            <title>Assigning New Virtual IPs to a Load Balancer</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="5">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>/virtualips</td>
                        <td colspan="3">Provision an additional virtual IP to a load balancer.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
                <para>
                    This feature allows a user to provision a new PUBLIC or SERVICENET address to the specified load
                    balancer. This feature is restricted because a user must justify the need for additional IP
                    addresses due to IANA requirements. Thus, a support ticket is required and must be supplied in the
                    request. An example of a reasonable justification would be the need to have a dedicated IP address
                    for SSL termination.
                </para>
                <para>
                    To retrieve the assigned virtual IP, the caller must perform a subsequent &GET; on the
                    /loadbalancers/loadBalancerId/virtualips URI.
                </para>
            <example>
                <title>Assign VIP Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-create-virtualips.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Assign VIP Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-create-virtualips.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section>
            <title>Synchronizing a Load Balancer</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="5">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&PUT;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>sync</td>
                        <td colspan="3">Synchronize the load balancer with the authoritative
                            source.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
                <para>
                    This feature allows for a caller to synchronize the specified load balancer with a particular
                    authoritative resource and is intended to be used when a load-balancer is stuck in a non-active
                    status. At the time of this writing the authoritative source is the database in which all load
                    balancer configurations are stored. We may plan on adding Zeus as an authoritative source later.
                    If a caller chooses to synchronize from the database, then Zeus will be updated to match the load
                    balancer's configuration in the database. The caller only needs to send a &PUT; request without a
                    body to the specified URI.
                </para>
                <para>
                    When syncing a load balancer in <code>PENDING_DELETE</code> or <code>DELETED</code> status the
                    operation will attempt to remove the load-balancer in Zeus and set the status to
                    <code>DELETED</code>. For all other statuses the sync operation will first delete the
                    load-balancer in Zeus and then re-create it. If successful, the load-balancer will be put in
                    the <code>ACTIVE</code> status. If for some reason the load-balancer could not be created in
                    Zeus, then the status will be set to <code>ERROR</code>.
                </para>
        </section>
        <section>
            <title>Suspending a Load Balancer</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="5">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>/suspension</td>
                        <td colspan="3">Retrieve the current suspension information, if any, for the
                            load balancer.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>/suspension</td>
                        <td colspan="3">Issue an immediate service suspension for a load
                            balancer.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>/suspension</td>
                        <td colspan="3">Remove the suspension for a load balancer.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
                <para> This feature allows for a caller to suspend and or unsuspend the specified
                load balancer. In order to suspend a load balancer, the caller must supply a reason,
                the ticket issuer (user) and a ticket identifier, which can be viewed by other users
                with support and service admin access levels. </para>
                <para>
                    If a caller requests suspension details for an unsuspended load balancer, an empty suspension
                    element <![CDATA[(<suspension />)]]> will be returned.
                </para>
                <note>
                    <para>
                    While customers are not permitted to delete suspended load balancers, a user with elevated
                    permissions may do so by issuing a &DELETE; request against the /loadbalancers/loadBalancerId URI.
                    </para>
                </note>
            <example>
                <title>List Suspension Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-suspension.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Suspension Response: JSON</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-suspension.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Add Suspension Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-create-suspension.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Add Suspension Response: JSON</title>
                <programlisting language="xml">
<xi:include href="samples/lb-create-suspension.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section>
            <title>Viewing Extended Details of a Load Balancer</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="5">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="5">/loadbalancers/<parameter>loadBalancerId</parameter>/extendedview</td>
                        <td colspan="3">View extended details of a load balancer.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
                <para>
                    This operation provides the detailed output for a specific load balancer configured and
                    associated with the designated account. It differs from the customer view because it provides
                    the total active connections, host machine information, and a rate limit (if applicable) as part
                    of the loadbalancer element.
                </para>
                <note>
                    <para>
                    An extended detail view is not available for a list of load balancers.
                    </para>
                </note>
            <example>
                <title>List Extended Load Balancer Details Response: XML</title>
                <programlisting language="xml"><?db-font-size 90% ?>
<xi:include href="samples/lb-list-loadbalancer-extendedview.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Extended Load Balancer Details Response: XML</title>
                <programlisting language="javascript"><?db-font-size 70% ?>
<xi:include href="samples/lb-list-loadbalancer-extendedview.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section>
            <title>Account Loadbalancers and Usage (Billing)</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="4">URI</td>
                        <td colspan="4">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">
                            /accounts/<parameter>accountId</parameter>/loadbalancers
                        </td>
                        <td colspan="4">Retrieve a list of load balancers on this account.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4"
                                >/accounts/billing?startTime=<parameter>YYYY</parameter>-<parameter>MM</parameter>-<parameter>DD</parameter>T
                                <parameter>HH</parameter>:<parameter>mm</parameter>:<parameter>ss</parameter>&amp;endTime=<parameter>YYYY</parameter>-<parameter>MM</parameter>-<parameter>DD</parameter>T
                                <parameter>HH</parameter>:<parameter>mm</parameter>:<parameter>ss</parameter>
                        </td>
                        <td colspan="4">Retrieve usage for all accounts for a single day.</td>
                        <td colspan="2">Support, Service Admin, Billing</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>
            </para>
            <simpara>
                Error Response Code(s):
                loadBalancerManagementFault (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>), unauthorized (
                <errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>), overLimit (
                <errorcode>413</errorcode>)
            </simpara>
                <para>
                    A user can list all load balancers and their usage for the given account using these methods. The
                    date parameters follow the yyyy-MM-dd date format. Please note that usage is retained for a
                    maximum of 90 days.
                </para>
            <example>
                <title>List Account Load Balancers Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-account-loadbalancers.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List </title>
                <programlisting language="xml">
<xi:include href="samples/lb-report-billing-response.xml" parse="text" />
                </programlisting>
            </example>
        </section>
        <section>
            <title>Load Balancer Status URL Management</title>
            <para>
                If a load balancer is stuck in <code>PENDING UPDATE</code>status, this is probably due to a broken
                transaction that should have rolled back in the database but didn't.
            </para>
            <para>
                In this case, operations personnel can use URLs such as the following to correct the issues:
            </para>
            <itemizedlist spacing="compact">
                <listitem>
                    <para>loadbalancers/<parameter>id</parameter>/setstatus/ACTIVE</para>
                </listitem>
                <listitem>
                    <para>loadbalancers/<parameter>id</parameter>/setstatus/BUILD</para>
                </listitem>
                <listitem>
                    <para>loadbalancers/<parameter>id</parameter>/setstatus/DELETED</para>
                </listitem>
                <listitem>
                    <para>loadbalancers/<parameter>id</parameter>/setstatus/ERROR</para>
                </listitem>
                <listitem>
                    <para>loadbalancers/<parameter>id</parameter>/setstatus/PENDING_DELETE</para>
                </listitem>
                <listitem>
                    <para>loadbalancers/<parameter>id</parameter>/setstatus/PENDING_UPDATE</para>
                </listitem>
            </itemizedlist>   
        </section>
        <section>
            <title>Listing and Acknowledging Alerts</title>
            <para>
                This operations allows user to list all the alerts in the system. Additional information about the
                alert can be retrieved by alert id. The status of the alert can be changed to <code>ACKNOWLEDGED</code>
                using the &PUT; method.
            </para>
            <para>
                When getting alerts based on account ids, you may specify any number of accounts as separate query
                parameters.  You may also include the stack trace with the final query parameter.
            </para>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="4">URI</td>
                        <td colspan="4">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/alerts</td>
                        <td colspan="4">Retrieve all alerts, if any.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/alerts/<parameter>alertId</parameter></td>
                        <td colspan="4">Retrieve details for the alert.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/loadbalancers/alerts/loadbalancer?id=<parameter>loadBalancerId</parameter></td>
                        <td colspan="4">Retrieve all alerts, if any, for the specified load
                            balancer.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/alerts/byloadbalancerids?id=<parameter>loadBalancerId</parameter>
                                &amp;id=<parameter>loadBalancerId</parameter>
                                &amp;startDate=<parameter>2010-12-21T12:32:07-06:00</parameter>
                                &amp;endDate=<parameter>2010-12-21T12:36:30-06:00</parameter></td>
                        <td colspan="4">Retrieve all alerts, if any, for any specified load balancers.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/management/alerts/account?account=<parameter>loadBalancerId</parameter>
                                &amp;account=<parameter>loadBalancerId</parameter>
                                &amp;startDate=<parameter>Date</parameter>&amp;endDate=<parameter>Date</parameter>
                                &amp;showStackTrace=<parameter>true</parameter></td>
                        <td colspan="4">Retrieve all alerts, if any, for an account.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/alerts/cluster/<parameter>clusterId</parameter>
                                &amp;startDate=<parameter>2010-12-21T12:32:07-06:00</parameter>
                                &amp;endDate=<parameter>2010-12-21T12:36:30-06:00</parameter></td>
                        <td colspan="4">Retrieve all alerts, if any, for any specified load balancers.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&PUT;</td>
                        <td colspan="4">/alerts/<parameter>alertId</parameter>/acknowledged</td>
                        <td colspan="4">Acknowledge alert and changes its status to
                                <code>ACKNOWLEDGED</code>.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/alerts/unacknowledged</td>
                        <td colspan="4">Retrieve unacknowledged alerts, if any.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
            <example>
                <title>List Alerts Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-alerts.xml" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section>
            <title>API Rate Limiting</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="4">URI</td>
                        <td colspan="4">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="4">/management/groups?name=<parameter>xxx</parameter>&amp;default=Y</td>
                        <td colspan="4">Add group name and default.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/management/groups</td>
                        <td colspan="4">View all groups for API rate limiting.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&PUT;</td>
                        <td colspan="4">/management/groups/<parameter>id</parameter>/setdefault?default=Y</td>
                        <td colspan="4">Update the default for a given group.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="4">/management</td>
                        <td colspan="4">Delete a group.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="4">/management/groups/<parameter>id</parameter>/accounts/<parameter>id</parameter></td>
                        <td colspan="4">View all groups for the account.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/management/accounts/<parameter>id</parameter>/groups</td>
                        <td colspan="4">View all groups for the account.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="4">/management/accounts/<parameter>id</parameter>/groups</td>
                        <td colspan="4">Delete all groups for the account.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
            <example>
                <title>List Limits Groups Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-groups.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section>
            <title>Load Balancer Limits (Absolute Limits)</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="4">URI</td>
                        <td colspan="4">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/management/loadbalancerlimitgroups</td>
                        <td colspan="4">List all load balancer limit groups.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="4">/management/loadbalancerlimitgroups</td>
                        <td colspan="4">Add a load balancer limit group.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="4">/management/loadbalancerlimitgroups/<parameter>id</parameter></td>
                        <td colspan="4">Delete the specific load balancer group.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/management/loadbalancerlimitgroups/<parameter>id</parameter></td>
                        <td colspan="4">Display load balancer limit group details.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&PUT;</td>
                        <td colspan="4">/management/loadbalancerlimitgroups/<parameter>id</parameter>/setdefault</td>
                        <td colspan="4">Set the load balancer limit group as the default.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Load balancer limits refers to the number of load balancers an account can have (formerly known as
                absolute limits). These imposed limits are defined in the form of groups with each group having a
                corresponding limit. There can only be one default limit at a time. Thus, if you create a new
                group and set it to default it will now become the default limit group.
            </para>
            <para>
                When deleting a load balancer limit group there may be accounts associated with that limit. If an
                account is associated with the limit that is being deleted it will assume the default limit. If
                the deleted limit was marked as the default limit then an existing group limit with the highest
                rate will become the default. If all limits are removed then users will be able to create as many
                load balancers as they can. However, there should be some error logs noting that no limits exist.
            </para>
            <example>
                <title>Add Limits Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-create-group-limits.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Add Limits Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-create-group-limits.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Limits Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-group-limits.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Limits Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-group-limits.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section>
            <title>Operations for Applying Load Balancer Limits</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="4">URI</td>
                        <td colspan="4">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/management/accounts/<parameter>accountId</parameter>/loadbalancerlimitgroup</td>
                        <td colspan="4">List the load balancer limit group associated with the
                            account.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="4">/management/loadbalancerlimitgroups/
                            <parameter>id</parameter>/accounts/
                            <parameter>accountId</parameter></td>
                        <td colspan="4">Add the specified account to the specified load balancer
                            limit group; removes it from previous group if applicable. </td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="4">/management/loadbalancerlimitgroups/
                            <parameter>id</parameter>/accounts/
                            <parameter>accountId</parameter></td>
                        <td colspan="4">Delete the specified account from the specified load
                            balancer limit group.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
                <para>
                    Accounts can belong to only one load balancer limit group. If an account is currently part of
                    a load balancer limit group then adding the account to a new group removes it from the original
                    group. Deleting a load balancer from a group causes the account to use the default group. Load
                    balancer limits are enforced immediately when trying to create load balancers. However, if an
                    account has a designated load balancer limit and is then added to a group with a lower limit, it
                    is possible for the account to have more load balancers than the new limit. Any further calls to
                    create a load balancer will not be allowed since the account is above the limit.
                </para>
            <example>
                <title>List Specified Limits Group Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-limit-groups.xml" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section>
            <title>Load Balancer Tickets</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td>Verb</td>
                        <td>URI</td>
                        <td>Description</td>
                        <td>Access Level</td>
                        <td>Optional Query Parameters</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td>GET</td>
                        <td>/management/loadbalancers/<parameter>loadBalancerId</parameter>/tickets</td>
                        <td>List all tickets for the load balancer.</td>
                        <td>Support, Service Admin</td>
                        <td>offset, limit</td>
                    </tr>
                    <tr>
                        <td>POST</td>
                        <td>/management/loadbalancers/<parameter>loadBalancerId</parameter>/tickets</td>
                        <td>Add a ticket to the load balancer.</td>
                        <td>Support, Service Admin</td>
                        <td> </td>
                    </tr>
                </tbody>
                </informaltable>
                    <para>
                        Support tickets can be associated with load balancers so that Support can keep track of
                        tickets over the lifetime of a load balancer. While a ticket can be identified here, there is no
                        verification that the ticket actually exists in Support's system.
                    </para>
                    <note>
                        <para>
                            Note: Tickets can also be added through calls to suspend a load balancer, add a
                            new virtual IP, or impose a rate limit. Support requires tickets for these
                            operations.
                        </para>
                    </note>
                <example>
                    <title>List Tickets for Load Balancer: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-ticket-response.xml" parse="text" />
                    </programlisting>
                </example>
                <example>
                    <title>List Tickets for Load Balancer: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-list-ticket-response.json" parse="text" />
                    </programlisting>
                </example>
                <example>
                    <title>Create Ticket for Load Balancer: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-create-ticket-request.xml" parse="text" />
                    </programlisting>
                </example>
                <example>
                    <title>Create Ticket for Load Balancer: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-create-ticket-request.json" parse="text" />
                    </programlisting>
                </example>
        </section>
        <section>
            <title>Zeus Usage</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="4">URI</td>
                        <td colspan="4">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/management/hosts/usage</td>
                        <td colspan="4">View usage of Zeus hosts.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
            <example>
                <title>List Zeus Usage Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-host-usage-records.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Zeus Usage Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-host-usage-records.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section>
            <title>Viewing Events</title>
            <para>
                These operations allow support to view events.
            </para>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="4">URI</td>
                        <td colspan="4">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/event/account/
                                <parameter>accountId</parameter>/loadbalancer?startDate=<parameter>yyyy-mm-dd</parameter>&amp;endDate=<parameter>yyyy-mm-dd</parameter></td>
                        <td colspan="4">List recent load balancer service events for this account
                            within a date range.</td>
                        <td colspan="2">Support, Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
                <para> The date parameters are optional. The results list all load balancer service
                events that occurred between the start and end dates. By default the start date is
                60 days from the time of the request and the end date is the date of the request.
                The results list is inclusive for both dates. </para>
            <example>
                <title>List Events Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-service-events.xml" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section>
            <title>Deleting a Load Balancer in Error/Suspended Status</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="4">URI</td>
                        <td colspan="4">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="4">/management/loadbalancers/<parameter>loadBalancerId</parameter>/error</td>
                        <td colspan="4">Delete a load balancer in <code>ERROR</code> status.</td>
                        <td colspan="2">Operations</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="4">/management/loadbalancers/<parameter>loadBalancerId</parameter>/suspended</td>
                        <td colspan="4">Delete a load balancer in <code>SUSPENDED</code>
                            status.</td>
                        <td colspan="2">Operations, Support</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>
            </para>
            <simpara>
                Error Response Code(s):
                loadBalancerFault (<errorcode>400</errorcode>,<errorcode>500</errorcode>), serviceUnavailable (
                <errorcode>503</errorcode>),unauthorized (<errorcode>401</errorcode>), badRequest (
                <errorcode>400</errorcode>), overLimit (<errorcode>413</errorcode>)
            </simpara>
            <para>
                The remove load balancer function removes the specified load balancer and its associated
                configuration. The load balancer must be in <code>ERROR</code> or <code>SUSPENDED</code> status
                to be removed. Any and all configuration data is immediately purged and is not recoverable. A
                limited amount of information, including usage information and deletion time, is  a &GET; on
                <code>loadbalancers/</code><parameter>id</parameter>.
            </para>
            <para>
                This operation does not require a request body.
            </para>
            <para>
                This operation does not return a response body.
            </para>
        </section>
        <section>
            <title>Blacklist Node and Access List Management</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="4">URI</td>
                        <td colspan="4">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/blacklist</td>
                        <td colspan="4">Retrieve a list of blacklisted items.</td>
                        <td colspan="2">Operations</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&POST;</td>
                        <td colspan="4">/blacklist</td>
                        <td colspan="4">Create a new blacklist item.</td>
                        <td colspan="2">Operations</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&DELETE;</td>
                        <td colspan="4">blacklist/<parameter>id</parameter></td>
                        <td colspan="4">Delete a specific blacklist item.</td>
                        <td colspan="2">Operations, Support</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>
                Normal Response Code(s):
                <returnvalue>200</returnvalue>
            </para>
            <simpara>
                Error Response Code(s):
                loadBalancerFault (<errorcode>400</errorcode>, <errorcode>500</errorcode>), serviceUnavailable (
                <errorcode>503</errorcode>),unauthorized (<errorcode>401</errorcode>), badRequest (
                <errorcode>400</errorcode>), overLimit (<errorcode>413</errorcode>)
            </simpara>
                <para>
                    The blacklist contains a list of IP address that have been considered unusable in our system.
                    The system can blacklist an item for Nodes, Accesslist or both. The type parameter can be set to 
                    (<code>NODE</code>, <code>ACCESSLIST</code>) to specify which type the blacklisted item should
                    be attached to. If neither type is submitted, it becomes global and is used against all
                    operations that check its values against the blacklist.
                </para>
            <example>
                <title>List Blacklist Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-blacklist.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Blacklist Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-blacklist.json" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Create Blacklist Request: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-create-blacklist.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Create Blacklist Request: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-create-blacklist.json" parse="text"/>
                </programlisting>
            </example>
        </section>
    </chapter>
    <chapter>
        <title>Reports</title>
        <para>
            Various reports are available, currently focused on load balancing hosts, virtual IPs and audits.
        </para>
        <section>
            <title>Host Capacity</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="4">URI</td>
                        <td colspan="4">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/hosts/capacityreport</td>
                        <td colspan="4">Generate a capacity planning report for all load balancing
                            hosts.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/hosts/<parameter>hostId</parameter>/capacityreport</td>
                        <td colspan="4">Generate a capacity planning report for a specified load
                            balancing host.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
            <para> The load balancing host capacity report provides insight into the available
                capacity of a given host machine. It also supplies an estimated runway of available
                capacity based on historical provisioning activity. The historical period consists
                of one week, reported as <code>allocatedConcurrentConnectionsInLastSevenDays</code>. </para>
            <example>
                <title>Report Host Capacity Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-capacityreport.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Report Host Capacity Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-capacityreport.json" parse="text"/>
                </programlisting>
            </example>         
        </section>
        <section>
            <title>Virtual IP Availability</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="4">URI</td>
                        <td colspan="4">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/virtualips/availabilityreport</td>
                        <td colspan="4">Generate an availability report for all virtual IPs associated with any
                            cluster.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/clusters/<parameter>clusterId</parameter>/virtualips/availabilityreport</td>
                        <td colspan="4">Generate an availability report for all virtual IPs associated with the
                            specific cluster</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
            <para> The virtual IP availability report provides insight into the availability of
                both public and ServiceNet IP addresses that are provisioned to a cluster. It also
                supplies an estimated runway of available capacity based on historical provisioning
                activity. The historical period consists of one week, reported as
                <code>allocatedPublicIpAddressesInLastSevenDays</code> and
                <code>allocatedServiceNetAddressesInLastSevenDays</code>. </para>
            <example>
                <title>Report VIP Availability Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-list-availabilityreport.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Report VIP Availability Response: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-list-availabilityreport.json" parse="text"/>
                </programlisting>
            </example>    
        </section>
        <section>
            <title>Load Balancer Audit</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="4">URI</td>
                        <td colspan="4">Description</td>
                        <td colspan="2">Access Level</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;</td>
                        <td colspan="4">/audit/status?staus={statues}&amp;{changes-since}</td>
                        <td colspan="4">Generate a load balancer audit report.</td>
                        <td colspan="2">Service Admin</td>
                    </tr>
                </tbody>
            </informaltable>
            <para> The load balancer audit report provides insight into the load balancers that may have issues.
                These issues are specified for this report as ERROR, BUILD, PENDING_DELETE, PENDING_UPDATE statues.
                Each status can be specified in the query parameter of this request in a comma delimited list.
                <code>ex.(/audit/status?status=error,build&amp;2011-5-16)</code>
                The alerts returned with the load balancers in question can be queried against using the alert id to
                return a more detailed alert message.
            </para>
            <example>
                <title>Report Load Balancer Audit: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-audit-response.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>Report Load Balancer Audit: JSON</title>
                <programlisting language="javascript">
<xi:include href="samples/lb-audit-response.json" parse="text"/>
                </programlisting>
            </example>
        </section>
    </chapter>
</book>
